# rTechManager - Clean Install Guide (Node 22 LTS)
# Port: 1783 | OS: Linux Mint 22+

1. UPGRADE TO NODE 22 (REQUIRED)
# Mint's default repo usually has Node 18, which is too old for Gemini/Vite.
sudo apt update
sudo apt install -y curl
curl -fsSL https://deb.nodesource.com/setup_22.x | sudo -E bash -
sudo apt install -y nodejs

2. INSTALL OTHER SYSTEM DEPENDENCIES
sudo apt install -y build-essential libpam0g-dev tightvncserver websockify

3. PREPARE DIRECTORY
sudo mkdir -p /opt/rtechmanager
sudo chown -R $USER:$USER /opt/rtechmanager
cd /opt/rtechmanager

4. INSTALL NODE PACKAGES
# This will now succeed without engine warnings.
npm install express body-parser authenticate-pam http-proxy @google/genai

5. CONFIGURE SYSTEMD SERVICE
sudo tee /etc/systemd/system/rtechmanager.service > /dev/null <<EOF
[Unit]
Description=rTechManager Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/opt/rtechmanager
ExecStart=/usr/bin/node server.js
Restart=on-failure

[Install]
WantedBy=multi-user.target
EOF

6. ACTIVATE
sudo systemctl daemon-reload
sudo systemctl enable rtechmanager
sudo systemctl restart rtechmanager

7. VNC BRIDGE
vncserver :1
nohup websockify --web /usr/share/novnc/ 6080 localhost:5901 &
